# Kafka 故障案例

####  案例1:  Kafka 单节点扩容之后，集群能写不能读

###### 问题描述：

​		搭建了一个kafka单机服务器，消息收发正常。升级成3个服务器集群后消息能写但不能读（启动命令行消费工具后一直没输出，使用 ` strace -f ` 跟踪发现一直在epoll>超时>epoll的循环中），观察服务器日志无输出。

###### 问题排查：

​		使用 topic 查询 consumer_offest，发现分区 leader 的 brokerid 是 0，但是机器集群 brokerid 是 「1-3」，因为起升级过程中把 0 号 broker 改成了 1 号（修改了 logs 和 config 下面的配置「id」）

###### 问题解决：

​		尝试把 1 号改回 0，重启即可正常消费。使用 kafka 提供的工具，调整 offset 主题分布机器为1，2，3，生产消费即恢复正常。

#### 案例2: 消息滞后，怎么处理？

问题：是否是因为消息处理时间太长导致

